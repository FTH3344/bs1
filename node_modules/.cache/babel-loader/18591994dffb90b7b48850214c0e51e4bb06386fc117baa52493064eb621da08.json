{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{Upload,Button,message,Row,Typography}from\"antd\";import{UploadOutlined}from\"@ant-design/icons\";import TextArea from\"antd/es/input/TextArea\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Text}=Typography;const P1=()=>{const[loading,setLoading]=useState(false);const[textareaContent,setTextareaContent]=useState(\"\");const[textareaContent2,setTextareaContent2]=useState(\"\");const[displayedSentences,setDisplayedSentences]=useState([]);const[counter,setCounter]=useState(0);const[paragraph,setParagraph]=useState(\"\");const scrollRef=useRef(null);const buttonRef_next=useRef(null);const buttonRef_before=useRef(null);const sentences=paragraph.split(/(?<=[。，：；])/);const handleTextareaChange=e=>{setTextareaContent(e.target.value);};const handleButtonClick_displayall=()=>{console.log(\"Textarea content:\",textareaContent);message.success(\"success!\");setParagraph(textareaContent);};const handleButtonClick_next=()=>{if(counter<sentences.length){const newDisplayedSentences=[...displayedSentences,sentences[counter]];setDisplayedSentences(newDisplayedSentences);setCounter(prevCounter=>prevCounter+1);}};const handleButtonClick_before=()=>{if(counter>0){setCounter(prevCounter=>prevCounter-1);setDisplayedSentences(displayedSentences.slice(0,counter-1));}};const clearBtn=()=>{setDisplayedSentences([]);setCounter(0);setParagraph(\"\");};useEffect(()=>{if(scrollRef.current){const scrollContainer=scrollRef.current;// 滚动到最底部\nscrollContainer.scrollTop=scrollContainer.scrollHeight;}},[displayedSentences]);const handleKeyDown=event=>{if(event.key==='ArrowRight'){console.log('Right arrow key pressed!');//   handleButtonClick_next();\nbuttonRef_next.current.click();}else if(event.key==='ArrowLeft'){console.log('left arrow key pressed!');//   handleButtonClick_next();\nbuttonRef_before.current.click();}};useEffect(()=>{window.addEventListener('keydown',handleKeyDown);// Cleanup the event listener on component unmount\nreturn()=>{window.removeEventListener('keydown',handleKeyDown);};},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{id:\"a1\",style:{marginLeft:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",height:\"70vh\"},children:[/*#__PURE__*/_jsx(\"div\",{ref:scrollRef,style:{flex:1,overflowY:\"auto\",wordWrap:'break-word',whiteSpace:'pre-wrap'},children:displayedSentences.map((sentence,index)=>/*#__PURE__*/_jsx(Text,{children:sentence},index))}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[counter,\"/\",sentences.length]}),/*#__PURE__*/_jsx(TextArea,{value:textareaContent,onChange:handleTextareaChange,placeholder:\"Enter some text here\",autoSize:{minRows:3,maxRows:5}}),/*#__PURE__*/_jsxs(Row,{justify:\"end\",children:[/*#__PURE__*/_jsx(Button,{ref:buttonRef_before,onClick:handleButtonClick_before,children:\"\\u5411\\u524D\"}),/*#__PURE__*/_jsx(Button,{ref:buttonRef_next,onClick:handleButtonClick_next,children:\"\\u5411\\u540E\"}),/*#__PURE__*/_jsx(Button,{onClick:handleButtonClick_displayall,children:\"\\u4E0A\\u4F20\"}),/*#__PURE__*/_jsx(Button,{onClick:clearBtn,children:\"\\u6E05\\u7A7A\"})]})]})]});};export default P1;","map":{"version":3,"names":["React","useState","useEffect","useRef","Upload","Button","message","Row","Typography","UploadOutlined","TextArea","jsx","_jsx","jsxs","_jsxs","Text","P1","loading","setLoading","textareaContent","setTextareaContent","textareaContent2","setTextareaContent2","displayedSentences","setDisplayedSentences","counter","setCounter","paragraph","setParagraph","scrollRef","buttonRef_next","buttonRef_before","sentences","split","handleTextareaChange","e","target","value","handleButtonClick_displayall","console","log","success","handleButtonClick_next","length","newDisplayedSentences","prevCounter","handleButtonClick_before","slice","clearBtn","current","scrollContainer","scrollTop","scrollHeight","handleKeyDown","event","key","click","window","addEventListener","removeEventListener","children","id","style","marginLeft","display","flexDirection","height","ref","flex","overflowY","wordWrap","whiteSpace","map","sentence","index","onChange","placeholder","autoSize","minRows","maxRows","justify","onClick"],"sources":["D:/beisong/my-react-app/src/p1.js"],"sourcesContent":["import React, { useState,useEffect,useRef } from \"react\";\r\nimport { Upload, Button, message, Row, Typography} from \"antd\";\r\nimport { UploadOutlined } from \"@ant-design/icons\";\r\nimport TextArea from \"antd/es/input/TextArea\";\r\nconst { Text } = Typography;\r\n\r\nconst P1 = () => {\r\n\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [textareaContent, setTextareaContent] = useState(\"\");\r\n  const [textareaContent2, setTextareaContent2] = useState(\"\");\r\n  const [displayedSentences, setDisplayedSentences] = useState([]);\r\n  const [counter, setCounter] = useState(0);\r\n  const [paragraph, setParagraph] = useState(\"\");\r\n  const scrollRef = useRef(null);\r\n  const buttonRef_next = useRef(null);\r\n  const buttonRef_before = useRef(null);\r\n  const sentences = paragraph.split(/(?<=[。，：；])/); \r\n\r\n  const handleTextareaChange = (e) => {\r\n    setTextareaContent(e.target.value); \r\n  };\r\n\r\n  const handleButtonClick_displayall = () => {\r\n    console.log(\"Textarea content:\", textareaContent);\r\n    message.success(\"success!\");\r\n    setParagraph(textareaContent);\r\n  };\r\n\r\n  const handleButtonClick_next = () => {\r\n    if (counter < sentences.length) {\r\n      const newDisplayedSentences = [...displayedSentences, sentences[counter]];\r\n      setDisplayedSentences(newDisplayedSentences);\r\n      setCounter((prevCounter) => prevCounter + 1);\r\n    }\r\n  };\r\n\r\n  const handleButtonClick_before = () => {\r\n    if (counter > 0) {\r\n      setCounter((prevCounter) => prevCounter - 1);\r\n      setDisplayedSentences(displayedSentences.slice(0, counter - 1));\r\n    }\r\n  };\r\n\r\n  const clearBtn = () => {\r\n    setDisplayedSentences([]);\r\n    setCounter(0);\r\n    setParagraph(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      const scrollContainer = scrollRef.current;\r\n      // 滚动到最底部\r\n      scrollContainer.scrollTop = scrollContainer.scrollHeight;\r\n    }\r\n  }, [displayedSentences]);\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'ArrowRight') {\r\n      console.log('Right arrow key pressed!');\r\n    //   handleButtonClick_next();\r\n      buttonRef_next.current.click();\r\n    }\r\n    else if (event.key === 'ArrowLeft') {\r\n      console.log('left arrow key pressed!');\r\n    //   handleButtonClick_next();\r\n      buttonRef_before.current.click();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n\r\n    // Cleanup the event listener on component unmount\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n}, []);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <br />\r\n      <div id=\"a1\" style={{ marginLeft: 10 }}>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", height: \"70vh\" }}>\r\n          <div ref={scrollRef} style={{ flex: 1, overflowY: \"auto\", wordWrap: 'break-word', whiteSpace: 'pre-wrap' }}>\r\n            {displayedSentences.map((sentence, index) => (\r\n              <Text key={index}>{sentence}</Text>\r\n            ))}\r\n          </div>\r\n          <br />\r\n          <br />\r\n          <br />\r\n          <br />\r\n        </div>\r\n        <div>{counter}/{sentences.length}</div>\r\n        <TextArea\r\n          value={textareaContent}\r\n          onChange={handleTextareaChange}\r\n          placeholder=\"Enter some text here\"\r\n          autoSize={{ minRows: 3, maxRows: 5 }}\r\n        />\r\n        <Row justify=\"end\">\r\n          <Button ref={buttonRef_before} onClick={handleButtonClick_before}>向前</Button>\r\n          <Button ref={buttonRef_next} onClick={handleButtonClick_next}>向后</Button>\r\n          <Button onClick={handleButtonClick_displayall}>上传</Button>\r\n          <Button onClick={clearBtn}>清空</Button>\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default P1;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}